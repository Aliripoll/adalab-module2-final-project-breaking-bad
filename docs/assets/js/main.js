"use strict";const charactersList=document.querySelector(".js_characters"),searchBtn=document.querySelector(".js_btn"),input=document.querySelector(".js_input"),favoritesList=document.querySelector(".js_favorites"),deleteBtn=document.querySelector(".js_deleteBtn");let charactersDataList=[],favoriteDataList=[];const baseUrl="./assets/data/characters.json";function renderCharacters(){let e="";for(const t of charactersDataList){let a="";-1!==favoriteDataList.findIndex(e=>e.name===t.name)&&(a="markCharacter"),e+=`<article class="article_card js_article ${a}" id="${t.char_id}">`,e+=`<img class="img" src="${t.img}"></>`,e+=`<p class="name"> ${t.name}</p>`,e+=`<p class="status"> ${t.status}</p>`;for(const a of t.occupation)e+=`<p class="occupation"> ${a}</p>`;e+="</article>"}charactersList.innerHTML=e,addFavorites()}function getCharacters(e,t=""){console.log("entro por getcharacters",t),fetch(e).then(e=>e.json()).then(e=>{charactersDataList=""!=t?e.filter(e=>e.name.toLowerCase().includes(t)):e,renderCharacters()})}function addFavorites(){const e=document.querySelectorAll(".js_article");for(const t of e)t.addEventListener("click",handleClickFavorites)}function handleClickFavorites(e){e.currentTarget.classList.toggle("selected");const t=charactersDataList.find(t=>t.char_id==e.currentTarget.id),a=favoriteDataList.findIndex(t=>t.char_id==e.currentTarget.id);-1===a?(favoriteDataList.push(t),localStorage.setItem("favoriteCharacter",JSON.stringify(favoriteDataList))):(favoriteDataList.splice(a,1),localStorage.setItem("favoriteCharacter",JSON.stringify(favoriteDataList))),console.log(t.name),renderFavorites()}function renderFavorites(){let e="";for(const t of favoriteDataList)e+=`<article class="article_card js_article" id="${t.char_id}">`,e+=`<img class="img" src="${t.img}"></>`,e+=`<p class="name"> ${t.name}</p>`,e+=`<p class="status"> ${t.status}</p>`,e+="</article>";favoritesList.innerHTML=e}getCharacters(baseUrl),searchBtn.addEventListener("click",e=>{e.preventDefault();let t=input.value.toLowerCase();getCharacters(baseUrl,t),renderCharacters()}),deleteBtn.addEventListener("click",e=>{favoritesList.innerHTML="",localStorage.removeItem("favoriteCharacter")});const savedFavorites=JSON.parse(localStorage.getItem("favoriteCharacter"));null!==savedFavorites&&(favoriteDataList=savedFavorites,renderFavorites());